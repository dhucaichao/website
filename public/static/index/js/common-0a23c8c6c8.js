function messageAlert(e,t){$(".alert")&&$(".alert").length&&$(".alert").remove();var o='<div class="alert alert-'+e+'">'+t+"</div>";$("body").append(o),$(".alert").fadeIn(),setTimeout(function(){$(".alert").fadeOut()},3e3)}function PV(e){_logParam.pageTitle=e,logWrite(window,"view")}function getKey(){var e=~~((new Date).getTime()/1e3);$.ajax({url:APIUrl+"appapi/ppuser/ppuser_app_get_secret.php?sn="+window.FingerprintCode+"&imei="+window.FingerprintCode+"&user_id="+localStorage.userId,data:{appid:1e4,key:md5("c56cf32e9a52a265ae47cd50570266cc"+e),timestamp:e},type:"POST",success:function(e){e=JSON.parse(e),200==e.status?(sessionStorage.keyParams=e.secret,sessionStorage.userId=localStorage.userId):console.log(e.message)},error:function(e){console.log(e)}})}function importFormat(){Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e}}function loginoutFun(){$.ajax({url:APIUrl+"appapi/login_server/pc/app_login_out_server.php",type:"POST",data:{userId:localStorage.userId,imei:window.FingerprintCode},timeout:100,success:function(e){e=JSON.parse(e),console.log(e),200==e.status?(window.location.reload(),localStorage.loginout=!0,localStorage.removeItem("userId")):messageAlert("warning",e.message)}})}function emotionPos(e){var t=["angrya","bs","bshi","bz","cafe","cake","cheer","cj","clock","come","cool","crazy","cry","cza","d","dizzya","flower","fuyun","gm","good","gza","h","hatea","hearta","heia","hs","hufen","j","k","kbsa","kl","klt","laugh","lazu","ldln","liwu","love","m","mb","money","moon","nk","nm","ok","otm","panda","pig","qq","rabbit","s","sad","sada","sdz","shenshou","shy","sk","sleepa","smile","sunny","sw","sweata","t","tooth","tza","unheart","vw","wq","wg","x","xhh","ye","yhh","yw","yx","zhh","zj","zy"],o=Object.create(null);return t.forEach(function(e,t){var n=Math.floor(t/9),i=t%9;o[e]=12.5*i+"% "+12.5*n+"%"}),function(e){return e.replace(/\[(\w+)\]/g,function(e,t){return'<span class="emotion" style="background-position: '+o[t]+';"></span>'})}}function backtop(e){var t='<div id="toTop"><span class="glyphicon glyphicon-arrow-up"></span></div>',o=$(window),n=o.height(),i=$(document).height(),a=$(t);$("body").append(a),$(window).scroll(function(){n<i&&n<$(window).scrollTop()?$("#toTop").fadeIn():$("#toTop").fadeOut()}),$("#toTop").click(function(){$(window).scrollTop("0")})}function store(){var e=function(e,t){Cookie.setCookie(e,t,"long")},t=function(e){return Cookie.getCookie(e)},o=function(e){Cookie.delCookie(e)};return{set:e,get:t,remove:o}}var isOnline=!0;window.public=window.public||{};var APIUrl="http://account.demowx.shuqireader.com/",OAPIUrl="http://ognv.demowx.shuqi.com/",comment_url="http://140.205.29.249/",shuqi_url="http://booktouch.demowx.uae.uc.cn/";public.ajaxUrl="http://original.demowx.uae.uc.cn/index.php",isOnline&&(APIUrl="https://account2.shuqireader.com/",OAPIUrl="https://ognv1.sqreader.com/",comment_url="https://read.xiaoshuo1-sm.com/",shuqi_url="http://t.shuqi.com/",public.ajaxUrl="https://ognv1.sqreader.com/index.php"),setTimeout(function(){$("img.lazy").lazyload()},1e3),$.get(OAPIUrl+"pcapi/pcinfo/domain",function(e){if(200==e.status){var t=e.data.domains;localStorage.domains=JSON.stringify(t)}}),localStorage.FingerprintCode?window.FingerprintCode=localStorage.FingerprintCode:(new Fingerprint2).get(function(e,t){localStorage.FingerprintCode=e,window.FingerprintCode=localStorage.FingerprintCode}),localStorage.uuid||(localStorage.uuid=""+(new Date).getTime()+parseInt(1e8*Math.random())),_logParam=window._logParam||{},_logParam.ai=2013,_logParam.appid="2844e25588d1",_logParam.dompath="online",_logParam.apv="v5.1.1",_logParam.pbd="2017.2.15",_logParam.ve="xxx",_logParam.appver="xxx",_logParam.placeid="xxx",_logParam.softid="xxx",_logParam.sn=localStorage.uuid,_logParam.dn=localStorage.uuid,_logParam.uuid=localStorage.uuid,getKey(),importFormat(),$(".glyphicon-eye-open").click(function(){var e=$(this),t=$(".userPassword");e.hasClass("eye-click")?(e.removeClass("eye-click"),t.attr("type","password")):(e.addClass("eye-click"),t.attr("type","text"))}),$("#loginCon").on("click","#loginOut",function(){loginoutFun()});var date=new Date,timesOfSeven=6048e5;date.getTime()-localStorage.loginTime>timesOfSeven&&localStorage.loginout&&!JSON.parse(localStorage.loginout)&&loginoutFun(),backtop(),function(e){e.fn.seamless=function(t){if(this.length){t=e.extend({},e.seamless.defaults,t);var o=this,n={};if(n.fn={},n.box=o.find(".hotseam"),n.list=n.box.find(".count"),n.items=n.list.find("li"),n.itemSum=n.items.length,!(n.itemSum<=1)){if(n.plusBtn=o.find(".manlbtn"),n.minusBtn=o.find(".manrbtn"),n.itemWidth=n.items.outerWidth(),n.itemHeight=n.items.outerHeight(),"left"==t.direction||"right"==t.direction){if(n.itemWidth*n.itemSum<=n.box.outerWidth())return;n.plusVal="left",n.minusVal="right",n.moveVal=n.itemWidth}else{if(n.itemHeight*n.itemSum<=n.box.outerHeight())return;n.plusVal="top",n.minusVal="bottom",n.moveVal=n.itemHeight}t.plus&&!n.plusBtn.length&&(n.plusBtn=e("<a></a>",{class:"plus"}).appendTo(o)),t.minus&&!n.minusBtn.length&&(n.minusBtn=e("<a></a>",{class:"minus"}).appendTo(o)),n.list.append(n.list.html()),n.fn.on=function(){t.auto&&(n.fn.off(),n.run=setTimeout(function(){n.fn.goto(t.direction)},t.time))},n.fn.off=function(){"undefined"!=typeof n.run&&clearTimeout(n.run)},n.fn.addControl=function(){t.plus&&n.minusBtn.length&&n.plusBtn.bind("click",function(){n.fn.goto(n.plusVal)}),t.minus&&n.minusBtn.length&&n.minusBtn.bind("click",function(){n.fn.goto(n.minusVal)})},n.fn.removeControl=function(){n.plusBtn.length&&n.plusBtn.unbind("click"),n.minusBtn.length&&n.minusBtn.unbind("click")},n.fn.goto=function(o){n.fn.off(),n.fn.removeControl(),n.box.stop(!0);var i,a;switch(o){case"left":case"top":i=0,"left"==o?(0==parseInt(n.box.scrollLeft(),10)&&n.box.scrollLeft(n.itemSum*n.moveVal),a=n.box.scrollLeft()-n.moveVal*t.step,a<i&&(a=i),n.box.animate({scrollLeft:a},t.speed,function(){parseInt(n.box.scrollLeft(),10)<=i&&n.box.scrollLeft(0),n.fn.addControl()})):(0==parseInt(n.box.scrollTop(),10)&&n.box.scrollTop(n.itemSum*n.moveVal),a=n.box.scrollTop()-n.moveVal*t.step,a<i&&(a=i),n.box.animate({scrollTop:a},t.speed,function(){parseInt(n.box.scrollTop(),10)<=i&&n.box.scrollTop(0),n.fn.addControl()}));break;case"right":case"bottom":i=n.itemSum*n.moveVal,"right"==o?(a=n.box.scrollLeft()+n.moveVal*t.step,a>i&&(a=i),n.box.animate({scrollLeft:a},t.speed,function(){parseInt(n.box.scrollLeft(),10)>=i&&n.box.scrollLeft(0)})):(a=n.box.scrollTop()+n.moveVal*t.step,a>i&&(a=i),n.box.animate({scrollTop:a},t.speed,function(){parseInt(n.box.scrollTop(),10)>=i&&n.box.scrollTop(0)}))}n.box.queue(function(){n.fn.addControl(),n.fn.on(),e(this).dequeue()})},n.box.hover(function(){n.fn.off()},function(){n.fn.on()}),n.fn.addControl(),n.fn.on()}}},e.seamless={defaults:{direction:"right",step:1,speed:800,time:4e3,auto:!0,plus:!0,minus:!0}}}(jQuery),public.queryString=function(){var e=location.search.length>0?location.search.substring(1):"",t={},o=e.length?e.split("&"):[],n=null,i=null,a=null,r=0,l=o.length;for(r=0;r<l;r++)n=o[r].split("="),i=decodeURIComponent(n[0]),a=decodeURIComponent(n[1]),i.length&&(t[i]=a);return t},public.pageKey="aaf50af46621010e7fbeda2b1fe8ef8e",public.bookKey="f2850e634f85f485d719314ae3cfe252",public.timestamp=((new Date).getTime()+"").substring(0,10),public.defaulImg=function(){for(var e=document.getElementsByTagName("img"),t=0,o=e.length,n=$("#js_path").val();t<o;t++)e[t].onerror=function(){this.src=n},e[t].src=e[t].src},public.imgErrorShow=function(e){e.src="img/default.jpg"},public.truncation=function(e,t){if(e)return e.substring(0,t)},public.format=function(e){e=1e3*e;var t=new Date;t.setTime(e);var o=t.getMonth()+1>9?t.getMonth()+1:"0"+(t.getMonth()+1),n=t.getDate()+1>9?t.getDate():"0"+t.getDate(),i=t.getFullYear()+"/"+o+"/"+n;return i},public.format2=function(e){e=1e3*e;var t=new Date;t.setTime(e);var o=t.getMonth()+1>9?t.getMonth()+1:"0"+(t.getMonth()+1),n=t.getDate()+1>9?t.getDate():"0"+t.getDate(),i=t.getHours()>9?t.getHours():"0"+t.getHours(),a=t.getMinutes()>9?t.getMinutes():"0"+t.getMinutes(),r=t.getFullYear()+"."+o+"."+n+"&nbsp;&nbsp;"+i+":"+a;return r},public.parseWords=function(e){return e?(e>1e4&&(e=Math.round(e/1e4)+"万"),e):"0"};var Cookie={setCookie:function(e,t,o,n){if("long"==o){var i=new Date;i.setTime(i.getTime()+31536e6),o=i.toUTCString()}else"object"==typeof o&&(o=o.toUTCString());document.cookie=e+"="+t+(o?"; expires="+o:"")+";path="+(n?n:"/")},getCookie:function(e){var t=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var i=$.trim(o[n]);if(i.substring(0,e.length+1)==e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return t},delCookie:function(e){this.setCookie(e,null,new Date(1970,1,1))}};window.readCookie=function(){var e="rd_book",t=null,o=window.localStorage;t=o.getItem(e)||null;var n=function(){var t=[],n=o.getItem(e);return null==n&&(n="[]"),t=JSON.parse(n)},i=function(t){if("object"!=typeof t)return!1;for(var i=n(),a=0;a<i.length;a++)if(i[a].bid==t.bid){i.splice(a,1);break}i.unshift(t);var r=JSON.stringify(i);o.setItem(e,r)},a=function(t){for(var i=n(),a=0;a<i.length;a++)if(i[a].bid==t){i.splice(a,1);break}var r=JSON.stringify(i);o.setItem(e,r)},r=function(){o.removeItem(e)},l=function(e){for(var t=n(),o=!1,i=0;i<t.length;i++)if(t[i].bid==e){o=!0;break}return o};return{getBook:n,removeBook:a,addBook:i,clearAll:r,isAdded:l}},$(function(){!function(e){var t=$("#js_search"),o=$("#js_searchInput"),n=$("#js_search_common"),i=$("#js_searchInput_common");o.focus(function(e){$(this).val("").parent().addClass("focus"),e.preventDefault()}),i.focus(function(e){$(this).val("").parent().addClass("focus"),e.preventDefault()}),t.off().on("click",function(){var t=o.val();""!=t&&"搜索书名/关键字"!=t&&(e.location.href="./search.php?keyword="+t)}),n.off().on("click",function(){var t=$("#js_searchInput_common").val();""!=t&&"搜索书名/关键字"!=t&&(e.location.href="./search.php?keyword="+t+"&page=1")}),document.onkeydown=function(t){var t=t||e.event;if(13==t.keyCode){var n=o.val()||i.val();""!=n&&"搜索书名/关键字"!=n&&(e.location.href="./search.php?keyword="+encodeURIComponent(n)+"&page=1")}}}(window),function(){setTimeout(function(){var e="cnzz_stat_icon_1259530409",t=$("#"+e);t.hide()},25)}(),function(){window.sys={};var e=navigator.userAgent.toLowerCase(),t=e.match(/msie ([\d.]+)/);t&&parseInt(t[1])<10&&alert("您正在使用的浏览器版本过低。为保证更好的浏览效果，建议您升级浏览器或使用其他浏览器进行访问。")}()});